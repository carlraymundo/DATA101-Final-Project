<!DOCTYPE html>
<html>
<head>
    <title>About the Project</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
    <!-- <script type="text/javascript" src="https://d3js.org/d3.v7.min.js"></script> -->
    <!-- <style type="text/css">
        svg{
            border: solid 1px #222;
        }
        svg > g.chart > rect.bar{
            fill: steelblue;
            stroke-width: 1px;
            stroke: #444;
            transition: fill 300ms;
        }
        svg > g.chart > rect.bar.new{
            fill: seagreen;
        }
        svg > g.chart > rect.bar.obs{
            fill: tomato;
        }
        svg > g.chart > rect.bar.highlight{
            fill: gold;
            stroke-width: 4px;
        }
    </style>-->
</head> 
<body>
    <!-- <script>
        d3.csv("/data/aggdata.csv", function(data) {
            for (var i = 0; i < data.length; i++) {
                console.log(data[i].mean_food_exp);
                console.log(data[i].mean_clothes_exp);
                console.log(data[i].mean_furnishings_exp);
                console.log(data[i].mean_health_exp);
                console.log(data[i].mean_fuels_exp);
                console.log(data[i].mean_rent_exp);
                console.log(data[i].mean_transpo_exp);
                console.log(data[i].mean_comms_exp);
                console.log(data[i].mean_recs_exp);
                console.log(data[i].mean_educ_exp);
                console.log(data[i].mean_misc_exp);
                console.log(data[i].mean_furniture_exps);
                console.log(data[i].mean_occasions_exp);
                console.log(data[i].mean_others_exp);
            }
        });        													

    </script>
    <br>
    
    <h1>Expenditure Breakdown<h1>
    <div id="barContainer"></div>
    <script type="text/javascript">
        // datasets
        let data1 = [{key: 'A', value: 30},{key: 'B', value: 20},
                     {key: 'E', value: 50},{key: 'F', value: 80},
                     {key: 'G', value: 30},{key: 'H', value: 70},
                     {key: 'J', value: 60},{key: 'L', value: 40}];
        let data2 = [{key: 'A', value: 40},{key: 'C', value: 20},
                     {key: 'D', value: 10},{key: 'F', value: 50},
                     {key: 'G', value: 60},{key: 'H', value: 90},
                     {key: 'I', value: 10},{key: 'J', value: 30},
                     {key: 'K', value: 50},{key: 'L', value: 80}];
        // chart dimensions 
        let width = 600, height = 400, margin = {t:10,b:30,l:30,r:10};
        // svg element
        let svg = d3.select('div#barContainer')
            .append('svg')
            .attr('width', width)
            .attr('height', height)
            .style('border', 'solid 1px #222');
        // chart area
        let chart = svg.append('g')
            .classed('chart', true)
            .attr('transform', `translate(${margin.l},${margin.t})`);
        // axes areas
        let xAxis = svg.append('g')
            .classed('axis', true)
            .attr('transform', `translate(${margin.l},${height-margin.b})`);
        let yAxis = svg.append('g')
            .classed('axis', true)
            .attr('transform', `translate(${margin.l},${margin.t})`);
        // update function
        function updateData(dataset){
            // transitions
            let d = 500;
            let tRemove = d3.transition()
                .duration(d);
            let tPosition = d3.transition()
                .duration(d)
                .delay(d);
            let tSize = d3.transition()
                .duration(d)
                .delay(d*2);
            // scales
            let xScale = d3.scaleLinear()
                .domain([0, d3.max(dataset, d=>d.value)])
                .range([0, width-margin.l-margin.r]);
            let yScale = d3.scaleBand()
                .domain(dataset.map(d=>d.key))
                .range([0, height-margin.t-margin.b])
                .padding(0.2);
            // axes
            d3.axisBottom(xScale)(xAxis.transition(tSize));
            d3.axisLeft(yScale)(yAxis.transition(tPosition));
            // update pattern
            // initial selection
            bars = chart.selectAll('rect.bar');
            // data binding
            bars = bars.data(dataset, d=>d.key);
            // exit selection
            bars.exit()
                .classed('obs', true)
                .transition(tRemove)
                .attr('width', 0)
                .remove();
                
            // enter selection
            let barsEnter = bars.enter().append('rect')
                .classed('bar new', true)
                .attr('x', xScale(0))
                .on('mouseover', function(e,d){
                    d3.select(this).classed('highlight', true);
                })
                .on('mouseout', function(e,d){
                    d3.select(this).classed('highlight', false);
                });
            // update selection
            bars.classed('new', false);
            // enter + update selection
            bars.merge(barsEnter)
                .transition(tPosition)
                .attr('y', d=>yScale(d.key))
                .attr('height', yScale.bandwidth())
                .transition(tSize)
                .attr('width', d=>xScale(d.value));
            // class reset
            setTimeout(()=>{bars.merge(barsEnter).classed('new', false)}, d*4)
        }

        setTimeout(()=>{updateData(data1)}, 2000)
        setTimeout(()=>{updateData(data2)}, 6000)
    </script>  -->
    <main>
    <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand" href="/">
            <img src="https://img.icons8.com/office/40/000000/family--v3.png">
          Family Income and Expenditure Survey (FIES) 2018
        </a>
        <div class="navbar-nav">
          <a class="nav-item nav-link active" href="/about">About our Project</a>
        </div>
      </nav>

    <div class="container-fluid">
    <h2 class="about-header">About the Project</h1>
    <p class="text-justify">Our primary motivation for this project was to illustrate how national data collected by government entities like
            the Philippine Statistics Authority (PSA) can be made more accessible to everyday Filipinos, something that
            could be more easily digested than hard numbers. </p>
    
    <p  class="text-justify">Our primary domain here is <b class="text-primary">edu-tainment</b>, which means we didn't want to be too
            technical with our approach. We wanted to inform and to educate everyday Filipinos or anyone else who happens our site
            about the Philippines's 2018 financial situation.</p>

    <!-- <em>*Note: </em> -->
    </div>

    <hr>

    <div class="container-fluid">
    <h2 class="about-header">About the FIES Data</h1>
    <p class="text-justify">
        The FIES data, or more specifically, the <b>Filipino Family Income and Expenditure Survey</b>,
        provides comprehensive data on Filipino family income and spending. This includes, for instance, 
        areas of expenditures, and sources of income in cash and in kind. Currently, the most updated version
        is the 2018 FIES, which is what we visualized 
        <a href="/" style="color:darkgreen;">here <i class="bi bi-arrow-left"></i></a>.
    </p>

    <p class="text-justify">
        The FIES data separated families by income brackets to discuss levels of living and highlight income disparaties. The dataset also
        has demographic information about family size, number of working family members, as well as about the heads of house -- the ones that 
        answered the survey -- including occupation, age, educational attainment among other things.
    </p>

    <p>Information about the FIES is available online. If you want to know more, you can access the FIES data 
        <a target="_blank" href="https://psa.gov.ph/content/family-income-and-expenditure-survey-fies-0" 
            style="color:midnightblue;">here <i class="bi bi-arrow-left"></i></a>.</p>
    </div>

    
    <hr>
    <div class="container-fluid"><h2 class="about-header">Key Objectives</h2></div>
    
    <br>

    <div class="container marketing">
        
        <!-- Three columns of text below the carousel -->
        <div class="row">
          <div class="col-lg-4">
            <img src="https://img.icons8.com/external-justicon-lineal-color-justicon/64/000000/external-income-ecommerce-justicon-lineal-color-justicon.png"/>
            <br><br><h2>Income and <br>Expenditure</h2>
            <p>Provide the average income and expenditure on a regional basis, taking into account the mean family size of a region.</p>
          </div><!-- /.col-lg-4 -->
          <div class="col-lg-4">
            <img src="https://img.icons8.com/external-becris-flat-becris/64/000000/external-statistics-data-science-becris-flat-becris.png"/>
            <br><br> <h2>Key Drivers of <br> income & expenses</h2>
            <p>Point out key drivers or indicators that have a major impact on family income and expenditures.</p>
          </div><!-- /.col-lg-4 -->
          <div class="col-lg-4">
            <img src="https://img.icons8.com/external-ddara-flat-ddara/64/000000/external-analysis-fintech-ddara-flat-ddara-1.png"/>
            <br><br><h2>Income distribution & <br> Degree of inequality</h2>
            <p>Provide an overview of income distribution and state of income equality on a regional basis.</p>
          </div><!-- /.col-lg-4 -->
        </div><!-- /.row -->
    </div>

    <hr>

    <div class="container-fluid">
    <h3 class="about-header">References</h3>
    <p class="text-justify">Family Income and Expenditure Survey (FIES). (n.d.). <em>Philippine Statistics Authority [PSA].</em> 
        https://psa.gov.ph/content/family-income-and-expenditure-survey-fies-0</p>
    </div>

    </main>
</body>
</html>